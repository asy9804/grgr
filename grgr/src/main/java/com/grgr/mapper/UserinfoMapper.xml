<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.grgr.mapper.QnaUserinfoMapper">
	<insert id="insertUserinfo">
		<selectKey resultType="int" keyProperty="uno" order="BEFORE">
			select into uno_seq.nextval form dual 
		</selectKey>
		insert into userinfo values(#{uno}, #{user_name}, #{nickname}, #{user_pw}
			, #{user_id}, #{phone}, #{email}, #{user_status}, #{active}, #{point}
			, #{business_no}, sysdate, sysdate, sysdate, #{user_update_uno})
	</insert>	

	<update id="updateUserinfo">
		update userinfo set user_name=#{user_name}, nickname=#{nickname}
			, user_pw=#{user_pw}, user_id=#{user_id}, phone=#{phone}
			, email=#{email}, point=#{point} where uno=#{uno}
	</update>
	
	<delete id="deleteUserinfo">
		delete from userinfo where uno=#{uno}
	</delete>
	
	<select id="selectUserinfo" resultType="Userinfo">
		select uno, user_name, nickname, user_pw, user_id, phone, email, user_status
			, active, point, business_no, last_login, regdate, user_update
			, user_update_uno where uno=#{uno}
	</select>
	
	<select id="selectUserinfoCount" resultType="int">
		select count(*) from userinfo
	</select>
	
	<select id="selectUserinfoList" resultType="Userinfo">
		select * from (select uno, user_name, nickname, user_pw, user_id, phone, email, user_status
			, active, point, business_no, last_login, regdate, user_update
			, user_update_uno from userinfo order by uno desc) info)
			 where rn between #{startRow} and #{endRow}
	</select>
</mapper>
